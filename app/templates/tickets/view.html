{% extends 'base.html' %}
{% block title %} View Ticket {% endblock %}

{% block content %}
<div class="ticket-details">
  <h2>{{ ticket.subject }}</h2>
  <p><strong>Description:</strong> {{ ticket.description }}</p>
  <p><strong>Status:</strong> {{ ticket.status }}</p>
  <p><strong>Priority:</strong> {{ ticket.priority }}</p>
  <hr>

  <h3>Messages:</h3>
  {% if messages %}
    {% for msg in messages %}
      <div class="message-box {% if msg.user.role == 'agent' %}agent{% else %}customer{% endif %}">
        <p><strong>{{ msg.user.username }}:</strong> {{ msg.content }}</p>
        <small>{{ msg.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
      </div>
    {% endfor %}
  {% else %}
    <p>No messages yet.</p>
  {% endif %}

  <hr>
  <form method="POST">
    <textarea name="content" placeholder="Write your message..." required></textarea>
    <button type="submit" class="btn">Send</button>
  </form>
</div>
{% endblock %}
